<!-- page title -->
<app-page-title [breadcrumbItems]="pageTitle" title="Financial"></app-page-title>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h2>Schedule Details</h2>
            </div>
            <div class="card-body" *ngIf="scheduleDetail">
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <th>Program Name</th>
                            <td>{{ scheduleDetail.programName }}</td>
                        </tr>
                        <tr>
                            <th>Group Name</th>
                            <td>{{ scheduleDetail.groupName }}</td>
                        </tr>
                        <tr>
                            <th>Start Date</th>
                            <td>{{ scheduleDetail.startDate }}</td>
                        </tr>
                        <tr>
                            <th>End Date</th>
                            <td>{{ scheduleDetail.endDate }}</td>
                        </tr>
                        <tr>
                            <th>Duration</th>
                            <td>{{ scheduleDetail.duration }} days</td>
                        </tr>
                        <tr>
                            <th>Allocated Budget</th>
                            <td>{{ scheduleDetail.scheduleAllocatedBudget | currency:'IDR':'symbol' }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="card-body" *ngIf="!scheduleDetail">
                <p>Loading schedule details...</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div *ngIf="scheduleDetail">
            <div *ngFor="let detail of scheduleDetail.details">
              <div class="card mb-4">
                  <div class="card-header">
                      <h2>Batch Name: {{ detail.batchName }}</h2>
                  </div>
                  <div class="card-body">
                      <p><strong>Total Budget:</strong> {{ detail.totalBudgetSetiapBatch | currency:'IDR':'symbol' }}</p>
                      <h6>Users:</h6>
                      <app-advanced-table 
                          [tableData]="detail.users" 
                          [columns]="userColumns" 
                          [pagination]="false"
                          [hasRowSelection]="false" 
                          [isSearchable]="false" 
                          [isSortable]="false">
                      </app-advanced-table>
                  </div>
              </div>
            </div>
        </div>
        <div *ngIf="!scheduleDetail">
          <p>Loading schedule details...</p>
        </div>
    </div>
</div>
